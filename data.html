<div class="item-reset">
  <!-- Button -->
  <div class="button-wrapper">
    <div class="button-inner-wrapper">
      <div class="button-header">
        <div class="button-header-control">
          <button
            class="button-control-quit button-actions dimelo_chat_item_dismiss"
            type="button"
            aria-label="Quitter"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="12px"
              height="12px"
              viewBox="0 0 20 20"
              focusable="false"
            >
              <path
                class=""
                d="M11.3,9.9l8.2-8.2c0.4-0.4,0.4-1,0-1.4c-0.4-0.4-1-0.4-1.4,0L9.9,8.5L1.7,0.3 c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l8.2,8.2L0.3,18c-0.4,0.4-0.4,1,0,1.4c0,0,0,0,0,0c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0l8.2-8.2 l8.1,8.2c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.4c0,0,0,0,0,0L11.3,9.9z"
              />
            </svg>
          </button>
        </div>
        <div class="button-header-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="40px"
            height="40px"
            viewBox="0 0 31.5 31.5"
            focusable="false"
          >
            <path
              class="bubbles-icon"
              d="M19.4,0c6.6,0,12.1,5.4,12.1,12.1c0,2.2-0.6,4.3-1.7,6l1.6,5.8l-0.1,0.1l-5.7-1.6 c-1.7,1-3.6,1.6-5.5,1.7c-1.2,4.4-5.3,7.4-9.8,7.4c-1.8,0-3.6-0.5-5.1-1.4l-4.9,1.4L0,31.3l1.4-4.8C0.5,24.9,0,23.1,0,21.3 c0-4.6,3-8.6,7.4-9.8l0-0.3C7.9,4.9,13.1,0,19.4,0z M7.5,13.6l-0.3,0.1c-3.1,1.2-5.1,4.2-5.1,7.6c0,1.5,0.4,2.9,1.1,4.1l0.2,0.3 l0.2,0.4L3,28.5l2.5-0.7l0.3,0.2c1.3,0.9,2.9,1.3,4.4,1.3c3.5,0,6.5-2.2,7.7-5.4c-5.3-0.7-9.6-4.8-10.4-10.1L7.5,13.6z M19.4,2.1 c-5.5,0-10,4.5-10,10s4.5,10,10,10c1.8,0,3.5-0.5,5-1.4l0.3-0.2l0.4-0.2l3.3,0.9l-0.9-3.4l0.2-0.3c1-1.6,1.6-3.5,1.6-5.4 C29.4,6.5,25,2.1,19.4,2.1z M20.4,16.6l0.1,0.1v1.8l-0.1,0.1h-1.8l-0.1-0.1v-1.8l0.1-0.1H20.4z M19.4,5.5c2.1,0,3.8,1.7,3.8,3.8 c0,1-0.4,1.9-1.1,2.6L22,12.1l-1.5,1.3v1.4l-0.1,0.1h-1.8l-0.1-0.1l0-2.3l2.2-2c0.4-0.3,0.6-0.8,0.6-1.3c0-0.9-0.8-1.7-1.7-1.7 c-0.9,0-1.6,0.7-1.7,1.6l0,0.2l-0.1,0.1h-1.8l-0.1-0.1C15.7,7.2,17.4,5.5,19.4,5.5z"
            />
          </svg>
        </div>
        <div class="button-header-title">Questions?</div>
      </div>
      <div class="button-content">
        <p class="button-content-message dimelo_chat_hide_when_offline">
          Our agents can answer you and guide you via live messaging!
        </p>
        <p
          class="button-content-message dimelo_chat_show_when_offline dimelo_chat_hide_when_online"
        >
          Our agents are not available at the moment.
        </p>
      </div>
      <button
        class="button-action button-actions button-open-form dimelo_chat_hide_when_offline dimelo_chat_show_when_online"
        type="button"
      >
        Chat with us
      </button>
    </div>
  </div>

  <!-- Form -->
  <div class="form-id-wrapper">
    <div class="form-id-inner-wrapper">
      <!-- Header  -->
      <div class="form-id-header">
        <div class="form-id-title">Personal Data</div>
        <button
          type="button"
          class="form-id-control-close item-reset-button"
          aria-label="Quitter"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="12px"
            height="12px"
            viewBox="0 0 20 20"
            focusable="false"
          >
            <path
              class=""
              d="M11.3,9.9l8.2-8.2c0.4-0.4,0.4-1,0-1.4c-0.4-0.4-1-0.4-1.4,0L9.9,8.5L1.7,0.3 c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l8.2,8.2L0.3,18c-0.4,0.4-0.4,1,0,1.4c0,0,0,0,0,0c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0l8.2-8.2 l8.1,8.2c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.4c0,0,0,0,0,0L11.3,9.9z"
            />
          </svg>
        </button>
      </div>
      <!-- Content -->
      <div class="form-id-content">
        <form class="form-id-chat">
          <!-- name -->
          <div class="form-id-row form-id-row-input form-id-name-row">
            <label for="rc_messaging_form_name">Name</label>
            <input
              type="text"
              name="name"
              id="rc_messaging_form_name"
              placeholder="Enter your name"
              required
            />
          </div>
          <!-- surname -->
          <div
            class="form-id-row form-id-row-input form-id-surname-row"
          >
            <label for="rc_messaging_form_surname">Surname</label>
            <input
              type="text"
              name="surname"
              id="rc_messaging_form_surname"
              placeholder="Enter your surname"
              required
            />
          </div>
          <!-- email -->
          <div
            class="form-id-row form-id-row-input form-id-email-row"
          >
            <label for="rc_messaging_form_email">Email</label>
            <input
              type="email"
              name="email"
              id="rc_messaging_form_email"
              placeholder="contact@example.com"
            />
          </div>
          <!-- phone -->
          <div
            class="form-id-row form-id-row-input form-id-phone-row"
          >
            <label for="rc_messaging_form_phone"
              >Phone Number</label
            >
            <input
              type="tel"
              name="phone"
              id="rc_messaging_form_phone"
              placeholder="Enter your phone number"
            />
          </div>
          <!-- message -->
          <div class="form-id-row form-id-row-textarea">
            <label for="rc_messaging_form_message">Message</label>
            <textarea
              name="message"
              placeholder="Write here..."
              id="rc_messaging_form_message"
            ></textarea>
          </div>
          <!-- topic -->
          <div class="form-id-row form-id-row-select">
            <label for="rc_messaging_form_topic">Topic</label>
            <select name="topic" id="rc_messaging_form_topic">
              <option value="">
                What can we help you with ?
              </option>
              <option value="cat_1">Category Un</option>
              <option value="cat_2">Category Dos</option>
              <option value="cat_3">Category Tres</option>
              <option value="cat_R">Category Ricky</option>
              <option value="cat_M">Category Martin</option>
            </select>
          </div>
          <!-- agreement -->
          <div
            class="form-id-row form-id-row-checkbox form-id-agreement-row"
          >
            <input
              type="checkbox"
              name="agreement"
              id="rc_messaging_form_agreement"
              required
            />
            <label for="rc_messaging_form_agreement"
              >I have read and agree to the terms &
              conditions</label
            >
          </div>
          <!-- submit -->
          <div class="form-id-row form-id-row-submit">
            <button
              type="submit"
              class="form-id-button item-reset-button"
            >
              Submit
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="dimelo_chat_item_action"></div>
<script>
  (function ($) {
    $(document).ready(function () {
      $(".button-action").click(function () {
        $(".button-wrapper").hide();
        $(".form-id-wrapper").show();
        $(".item-reset").addClass("item-reset-form-id");
      });
      $(".form-id-control-close").click(function () {
        $(".button-wrapper").show();
        $(".form-id-wrapper").hide();
        $(".item-reset").removeClass("item-reset-form-id");
      });
      $(".form-id-chat").submit(function (e) {
        e.preventDefault();

        var name = $("#rc_messaging_form_name").val().trim();
        var surname = $("#rc_messaging_form_surname").val().trim();
        var email = $("#rc_messaging_form_email").val().trim();
        var phone = $("#rc_messaging_form_phone").val().trim();

        var _chatq = window._chatq || [];
        _chatq.push([
          "_setIdentity",
          {
            screenname: name + " " + surname,
            firstname: name,
            lastname: surname,
            email: email,
            extra_values: {
              phone_number: phone,
            },
          },
        ]);

        var topic = $("#rc_messaging_form_topic").val().trim();
        if (topic) {
          _chatq.push(["_fillCustomVariable", "custom_topic", topic]);
        }

        var msg = $("#rc_messaging_form_message").val().trim();
        if (msg) {
          _chatq.push([
            "_onEvent",
            "chat_shown",
            function () {
              _chatq.push([
                "_addMessage",
                { body: msg, agent: false, engage: true },
              ]);
            },
          ]);
        }

        $(".dimelo_chat_item_action").click();
      });
    });
  })(Dimelo.Messaging.jQuery);
</script>
